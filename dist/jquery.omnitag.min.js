/*
 *  jQuery omnitag - v0.0.2
 *  A Site Catalyst custom link helper
 *  https://github.com/liakwee/omnitag
 *
 *  Made by Lee Liak Wee
 *  Under MIT License
 */
!function(a,b){function c(b,c){this.element=b,this.settings=a.extend({},e,c),this._defaults=e,this._name=d,this.init()}var d="omnitag",e={delay:300,account:"Site Catalyst Account",trackDownloadLinks:!0,trackExternalLinks:!1};a.extend(c.prototype,{init:function(){var b=this;s.trackDownloadLinks=this.settings.trackDownloadLinks,s.trackExternalLinks=this.settings.trackExternalLinks,s.forcedLinkTrackingTimeout=this.settings.delay,s.useForcedLinkTracking=1,a(this.element).on("click",function(a){a.preventDefault(),b.triggerTagging(),setTimeout(function(){b.openURI(b.element)},b.settings.delay)})},triggerTagging:function(){var b,c,d,e,f;b=a(this.element).data("tagging"),c=b.events,d=b.eVar,e=b.prop,value=b.value;try{if(c&&(s.linkTrackVars="events,",s.linkTrackEvents=c.join(),s.events=c.join()),d)for(var g=0;g<d.length;g++)f=d[g],s.linkTrackVars+=f+",",s[f]=value[g];if(e){for(var h=0;h<e.length;h++)f=e[h],s.linkTrackVars+=f+",",s[f]=value[h];s.linkTrackVars=s.linkTrackVars.substr(0,s.linkTrackVars.length-1)}s.tl(this,"o",b.linkname),s.linkTrackVars=""}catch(i){console.log(i)}},openURI:function(a){"_blank"===a.target?b.open(a.href):b.location.href=a.href}}),a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))}),this}}(jQuery,window,document);